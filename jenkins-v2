pipeline {
agent any
    environment {
        ENV_NAME = "${env.BRANCH_NAME}"
    }
stages {
    
    
    stage('Deploy to stag') {
            
        steps {
                        script {
                     if (ENV_NAME == 'main') {
                        
                    } else if (ENV_NAME == 'Production') {
                        
                    }                           
                            sshPublisher(
                                continueOnError: false, failOnError: true,
                                publishers: [
                                    sshPublisherDesc(
                                        configName: "testvm",
                                        verbose: true,
                                        transfers: [
                                            sshTransfer(
                                                remoteDirectory: "",
                                                
                                                execCommand: "cd /var/ && ls -l"
                                                

                                            )
                                        ])
                                ])
                        }
                    
                }
    }

    stage('Deploy to PROD') {

        steps {
                        script {
                            sshPublisher(
                                continueOnError: false, failOnError: true,
                                publishers: [
                                    sshPublisherDesc(
                                        configName: "testvm",
                                        verbose: true,
                                        transfers: [
                                            sshTransfer(
                                                remoteDirectory: "",
                                                
                                                execCommand: "cd /var/ && ls -l"
                                                

                                            )
                                        ])
                                ])
                        }
                    
                }
    }
  }
}
